<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js'></script>
    <title>Upoznaj svog poslanika</title>
    <style>
    /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
    
    #map {
        height: 100%;
    }
    /* Optional: Makes the sample page fill the window. */
    
    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    
    .videoPoslanika {
        max-width: 19.4%;
    }
    
    .navbar {
        margin-bottom: 0px;
    }
    
    .navbar-default {
        position: absolute;
        top: 0px;
        z-index: 1;
        width: 100%;
        background: rgba(255, 255, 255, 0.7);
    }
    
    .usp-search {
        text-align: center;
    }
    
    .modal-backdrop.in {
        opacity: 0.1;
    }
    
    .modal.fade:not(.in).left .modal-dialog {
        -webkit-transform: translate3d(-25%, 0, 0);
        transform: translate3d(-25%, 0, 0);
    }
    
    .modal-dialog {
        margin: 60px 0 0 0;
    }

    .modal-body{
        background-image: url(imgs/Popup_background_1.png);
        background-repeat: no-repeat;
        background-size: cover;
        opacity: 1;
        min-height: 400px;
    }

    .header-opacity{
        background-color: rgba(255, 255, 255, 0.82);
    }
    .opacity{
        background-color: rgba(255, 255, 255, 0);
    }
    
    .tab-pane{padding: 20px;}
    
    #slikaPoslanika{
        max-height: 120px;
    }
    

    </style>

    <link rel="stylesheet" type="text/css" href="animate.css">
</head>

<body>
    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Brand</a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <form class="navbar-form usp-search">
                    <!--<div class="form-group">
              <input type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>-->
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search for...">
                        <span class="input-group-btn">
                <button class="btn btn-default" type="button">Go!</button>
              </span>
                    </div>
                    <!-- /input-group -->
                </form>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>
    <div id="myModal" class="modal fade left" tabindex="-1" role="dialog">
        <div class="modal-dialog opacity" role="document">
            <div class="modal-content opacity">
                <div class="modal-header header-opacity">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Ime i prezime poslanika</h4>
                </div>
                <div class="modal-body opacity" >

                    <div class="poslanik-details">
                        <img id="slikaPoslanika" src="">

                        <h2 id="imePrezime">Ime prezime</h2>
                        <h3 id="stranka">Stranka</h3>

                        <p id="godine">Opis poslanika</p>
                        <p id="odbor">Opis poslanika</p>
                        <p id="prijateljstvo">Jos nesto o poslaniku</p>

                        <span>Istinomer bar:</span>
                        <div class="meter "> <!-- red orange -->
                            <span id="mera" style="width: 80%"></span>
                        </div>
                    </div>

                    <ul class="nav nav-pills">
                        <li class=""><a data-toggle="tab" href="#home">Snimci</a></li>
                        <li class="active in"><a data-toggle="tab" href="#menu1">U medijima</a></li>
                        <li class=""><a data-toggle="tab" href="#menu2">Plate</a></li>
                        <li class=""><a data-toggle="tab" href="#menu3">Istinomer</a></li>
                    </ul>
                    <div class="tab-content opacity">
                        <div id="home" class="tab-pane fade opacity">
                            <div class="videos opacity"></div>
                        </div>
                        <div id="menu1" class="tab-pane fade active in opacity">
                            <div class="rss opacity"></div>
                        </div>
                        <div id="menu2" class="tab-pane fade opacity">
                        </div>
                        <div id="menu3" class="tab-pane fade opacity">
                        </div>
                    </div>
                </div>
                <div class="modal-footer header-opacity">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- /.modal -->
    <div id="slickeTest"></div>
    <div id="map"></div>
    <script>
    var sirina;
    var duzina;

    var poslanici ;


    $.getJSON('poslKood.json', function(json, textStatus) {

        sirina = 44.32;
        duzina = 20;

        poslanici = json;


    });

    //lokacije mesta rodjenja

    //lokacije mesta rodjenja


    function parseRSS(podaci) {
        $(".rss").empty();

        for (var i = 0; i < podaci.length; i++) {
            var tempInput = podaci[i];
            $(".rss").append('<a href="' + tempInput.link + '">' + tempInput.title + '</a> <br/>' + tempInput.pubDate + ' <br/>')
        }
    }


    function getRSS1(argument) {

        var FEED_URL = "http://www.naslovi.net/rss/search.php?q=nenad+canak";

        var link = "https://api.rss2json.com/v1/api.json?rss_url=" + FEED_URL + "&callback=parseRSS";

        $.ajax({
            url: link,

            // The name of the callback parameter, as specified by the YQL service
            jsonp: "callback",

            // Tell jQuery we're expecting JSONP
            dataType: "jsonp",

            // Work with the response
            success: function(response) {

                if (response.status == "ok")
                    parseRSS(response.items); // server response
            }
        });

		    	if(response.status == "ok")
		        	parseRSS( response.items ); // server response
		    }
		});

       
    }


    function listaYTvidea(argument) {
        $.getJSON('https://www.googleapis.com/youtube/v3/search?part=snippet&q=' + "nenad canak" + '&maxResults=15&order=date&key=AIzaSyC4AE6JNj2vQx_-XpLWHtV4-v5uQR-fM1Q', function(json, textStatus) {

            var videos = json.items;

            
            $(".videos").empty();

            for (var i = 0; i < videos.length; i++) {

                var videoInfo = videos[i].snippet;
                var videoId = videos[i].id.videoId;

                $(".videos").append(' <a target="_blank" href="https://www.youtube.com/watch?v=' + videoId + '"><img class="videoPoslanika" src="' + videoInfo.thumbnails.high.url + '" alt="' + videoInfo.title + '" /> </a>')

            }

        });
    }


    var map;

    window.initMap = function() {
        var myLatLng = {
            lat: 44.363,
            lng: 20.044
        };

        map = new google.maps.Map(document.getElementById('map'), {
            zoom: 9,
            center: myLatLng,
            mapTypeControl: false
        });

        initHandler();

        listaYTvidea();
        getRSS1();

    }

    function initHandler(argument) {

        google.maps.event.addListenerOnce(map, 'idle', function() {
            for (var i = 0; i < poslanici.length; i++) {
                
               /* var pomX = Math.random();
                var pomY = Math.random();*/

                var tempPosl =  poslanici[i];

                var marker = new google.maps.Marker({
                    position: {
                        lat: +tempPosl.sirina ,
                        lng: +tempPosl.duzina 
                    },
                    map: map,
                    title: 'Hello World!',
                    details: {
                        ime: tempPosl.ime ,
                        prezime: tempPosl.prezime ,
                        stranka : tempPosl.politicke_partije__naziv,
                        odbor : "odbor",
                        godine: "",
                        grupa: "",
                        slika:tempPosl.file__path,
                        opis: "bilo koji podatak * " + i,
                        poruka: "vidimo se" + i
                    }
                });

                marker.addListener('click', function() {

                    var poslanikLokal = this.details ;

                    $("#imePrezime").empty();
                    $("#stranka").empty();      
                    $("#godine").empty();   
                    $("#odbor").empty();    
                    $("#prijateljstvo").empty();
                    
                    
                    $("#imePrezime").html(poslanikLokal.ime + " "+poslanikLokal.prezime );
                    $("#stranka").html(poslanikLokal.stranka);
                    $("#godine").html(poslanikLokal.datum_rodjenja);
                    $("#odbor").html("odbor");
                    $("#prijateljstvo").html("prijateljstvo unos");

                    if(poslanikLokal.slika.length >0 && poslanikLokal.slika.length !=null)
                    $("#slikaPoslanika").attr('src', "http://5.9.127.172/" + poslanikLokal.slika);
                    else 
                     $("#slikaPoslanika").attr('src', "http://5.9.127.172/" + "img/ministers/phRcWaDk8X.jpg");//default slika

                    $('#myModal').modal('show')


                    $('#myModal').modal('show')


                    /*alert("napraviti modal koji ce da prikazuje podatke za marker " + this.details.opis + "  _ " + this.details.poruka)*/
                });

            }

        }); //idle handler

        }); //idle handler



    } //initHandler
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB8iROkLemDoQ0DtokakfnPecU0h0rOK9I&callback=initMap">
    </script>
</body>

</html>
